---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import Hero from "../components/Hero.astro";
import BookingButton from "../components/BookingButton.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
import { getCollection } from "astro:content";

const siteSettings = await getCollection("siteSettings");
const siteData = siteSettings[0]?.data;

const benefits = await getCollection("benefits");
const sortedBenefits = benefits.sort((a, b) => a.data.order - b.data.order);

const testimonials = await getCollection(
  "testimonials",
  (entry) => entry.data.featured,
);
const featuredTestimonials = testimonials
  .sort((a, b) => a.data.order - b.data.order)
  .slice(0, 3);
---

<!doctype html>
<html lang="nl">
  <head>
    <BaseHead
      title={siteData?.siteTitle || SITE_TITLE}
      description={siteData?.siteDescription || SITE_DESCRIPTION}
    />
  </head>
  <body>
    <Header />
    <main>
      <Hero
        title={siteData?.heroHeadline || "Ontspannen, Verjongen, Herstellen"}
        description={
          siteData?.heroDescription ||
            "Ervaar de helende kracht van professionele massagetherapie met gepersonaliseerde behandelingen die ontworpen zijn om stress weg te smelten en het evenwicht in lichaam en geest te herstellen."
        }
      />

      <!-- Stoelmassage Service -->
      <section class="section section-light">
        <div class="container">
          <div class="text-center mb-4">
            <h2>{siteData?.stoelmassageTitle || "Stoelmassage"}</h2>
            <p>
              {siteData?.stoelmassageDescription ||
                "Ontdek de voordelen van een professionele stoelmassage op locatie"}
            </p>
          </div>
          <div class="service-detail">
            <div class="service-content">
              <h3>Wat is Stoelmassage?</h3>
              <p>
                {siteData?.stoelmassageWhatIs ||
                  "Stoelmassage is een korte, effectieve massagevorm die speciaal is ontwikkeld voor op de werkplek. De massage wordt uitgevoerd op een speciaal ergonomische stoel en richt zich op de rug, schouders, nek en armen - de plekken waar veel stress zich ophoopt."}
              </p>

              <h3>Voordelen</h3>
              <p set:html={siteData?.stoelmassageBenefits?.replace(/\n/g, "<br />") ||
                "Verlichting van nek- en rugklachten<br />Vermindering van stress en spanning<br />Beter doorbloeding<br />Verhoogde productiviteit en concentratie<br />Preventie van RSI-klachten"} />

              <h3>Praktische Informatie</h3>
              <p>
                {siteData?.stoelmassagePracticalInfo ||
                  "Een stoelmassage duurt doorgaans 15 tot 30 minuten en wordt uitgevoerd op uw werkplek. De massage vindt plaats door de kleding heen, waardoor er geen omkleedtijd nodig is. Ideaal voor bedrijven die hun medewerkers willen belonen met een moment van ontspanning."}
              </p>
            </div>
            <div class="service-image">
              <div class="image-placeholder">
                <h3>Stoelmassage Afbeelding</h3>
                <p>Uw stoelmassage afbeelding zou hier komen</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Benefits Section -->
      <section class="section">
        <div class="container">
          <div class="text-center mb-4">
            <h2>Voordelen van Massagetherapie</h2>
            <p>
              Ontdek hoe regelmatige massage uw gezondheid en welzijn kan
              transformeren
            </p>
          </div>
          <div class="grid grid-2">
            {
              sortedBenefits.map((benefit) => (
                <div class="benefit-item">
                  <h3>{benefit.data.title}</h3>
                  <p>{benefit.data.description}</p>
                </div>
              ))
            }
          </div>
        </div>
      </section>

      {featuredTestimonials.length > 0 && (
        <!-- Testimonials -->
        <section class="section section-light">
          <div class="container">
            <div class="text-center mb-4">
              <h2>Wat Onze Cliënten Zeggen</h2>
              <p>
                Echte ervaringen van echte cliënten die verlichting en ontspanning
                hebben gevonden
              </p>
            </div>
            <div class="grid grid-3">
              {
                featuredTestimonials.map((testimonial) => (
                  <Testimonial
                    name={testimonial.data.name}
                    text={testimonial.data.text}
                    service={testimonial.data.service}
                    date={testimonial.data.date}
                  />
                ))
              }
            </div>
          </div>
        </section>
      )}

      <!-- CTA Section -->
      <section class="section">
        <div class="container">
          <div class="cta-section text-center">
            <h2>Klaar om de Voordelen te Ervaren?</h2>
            <p>
              Zet de eerste stap naar ontspanning en heling. Boek vandaag uw
              afspraak en ontdek de transformerende kracht van professionele
              massagetherapie.
            </p>
          </div>
        </div>
      </section>
    </main>
    <Footer />
  </body>
</html>

<style>
  .benefit-item {
    text-align: center;
    padding: 2rem;
  }

  .benefit-item h3 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    color: var(--accent);
  }

  .benefit-item p {
    color: var(--text-light);
    line-height: 1.6;
  }

  .cta-section {
    max-width: 800px;
    margin: 0 auto;
    padding: 3rem 2rem;
    background: var(--secondary);
    border-radius: 15px;
    box-shadow: var(--shadow);
  }

  .cta-section h2 {
    margin-bottom: 1.5rem;
  }

  .service-detail {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 3rem;
    align-items: start;
  }

  .service-content h3 {
    color: var(--text);
    margin-bottom: 1rem;
    margin-top: 2rem;
    font-size: 1.3rem;
  }

  .service-content h3:first-child {
    margin-top: 0;
  }

  .service-content p {
    color: var(--text-light);
    line-height: 1.7;
    margin-bottom: 1.5rem;
  }

  .image-placeholder {
    background: var(--gray-light);
    border: 2px dashed var(--gray-medium);
    border-radius: 10px;
    padding: 2rem;
    text-align: center;
    color: var(--text-light);
  }

  .image-placeholder h3 {
    margin-bottom: 0.5rem;
    color: var(--text);
  }

  .cta-section p {
    margin-bottom: 2rem;
    font-size: 1.1rem;
    color: var(--text-light);
    line-height: 1.6;
  }

  @media (max-width: 768px) {
    .benefit-item {
      padding: 1.5rem;
    }

    .service-detail {
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    .cta-section {
      padding: 2rem 1.5rem;
    }
  }
</style>
